const Promise = require('bluebird')
const MetaService = require('../service/MetaService')
const Utils = require('../utils/Utils')

const ids = [528280977531,639950127253,889058230479,957777707231,987842478310,992137445607,1009317314795,1017907249389,1022202216686,1026497183983,1215475745051,1228360646942,1241245548833,1318554960179,1438814044495,1636382540157,1640677507454,1765231559067,2044404433372,2095944040936,2143188681203,2156073583094,2353642078756,2362232013350,2521145803339,2980707304118,2993592206009,3036541878979,3139621094107,3173980832483,3178275799780,3208340570859,3350074491660,3457448674085,3517578216243,3783866188657,3878355469191,3942779978646,3959959847834,3972844749725,4376571675643,4393751544831,4526895531038,4604204942384,4677219386433,4973572129926,4995046966411,5257039971528,5415953761517,5604932322585,5699421603119,5845450491217,6055903888770,6064493823364,6519760356846,6588479833598,6640019441162,6665789244944,6944962119249,7116760811129,7249904797336,7456063227592,7554847475423,7572027344611,7748121003788,7765300872976,7799660611352,7812545513243,7825430415134,8242042242943,8280696948616,8323646621586,8396661065635,8443905705902,8491150346169,8564164790218,8654359103455,8748848383989,8946416879651,8989366552621,9088150800452,9096740735046,9113920604234,9221294786659,9225589753956,9229884721253,9444633086103,9573482105013,9908489554179,9985798965525,9998683867416,10071698311465,10131827853623,10672993733045,11038065953290,11089605560854,11102490462745,11128260266527,11141145168418,11179799874091,11196979743279,11295763991110,11407433140832,11420318042723,11424613010020,11566346930821,11772505361077,11824044968641,11862699674314,11875584576205,11879879543502,11952893987551,12004433595115,12068858104570,12133282614025,12279311502123,12322261175093,12378095749954,12390980651845,12554189409131,12584254180210,12601434049398,12618613918586,12678743460744,12695923329932,12777527708575,12803297512357,12824772348842,12829067316139,12837657250733,12880606923703,12945031433158,13018045877207,13254269078542,13490492279877,13675175873648,13765370186885,13773960121479,13808319859855,13821204761746,13907104107686,13962938682547,13980118551735,14027363192002,14310831033604,14392435412247,14418205216029,14431090117920,14439680052514,14448269987108,14486924692781,14508399529266,14611478744394,14620068678988,14628658613582,14632953580879,14701673057631,14903536520590,14907831487887,14933601291669,14946486193560,14955076128154,15066745277876,15393162792448,15427522530824,15577846386219,15586436320813,15814069587554,15908558868088,16007343115919,16020228017810,16192026709690,16290810957521,16531329126153,16557098929935,16638703308578,16651588210469,16668768079657,16724602654518,16849156706131,17154099384218,17214228926376,17235703762861,17252883632049,17282948403128,17587891081215,17635135721482,17755394805798,17854179053629,17875653890114,17910013628490,17965848203351,18120467026043,18129056960637,18189186502795,18257905979547,18339510358190,18391049965754,18421114736833,18678812774653,18691697676544,19250043425154,19310172967312,19460496822707,20250770805355,20289425511028,20315195314810,20319490282107,20358144987780,20693152436946,20723217208025,20761871913698,20800526619371,20830591390450,20882130998014,21075404526379,21088289428270,21139829035834,21303037793120,21380347204466,21457656615812,21487721386891,21500606288782,21522081125267,21534966027158,21874268443621,21891448312809,22024592299016,22046067135501,22054657070095,22119081579550,22144851383332,22153441317926,22200685958193,22230750729272,22252225565757,22286585304133,22290880271430,22621592753299,22630182687893,22638772622487,22643067589784,22801981379773,22874995823822,23021024711920,23076859286781,23119808959751,23205708305691,23373212030274,23381801964868,23484881179996,23489176147293,23592255362421,23695334577549,24013162157527,24043226928606,24068996732388,24073291699685,24081881634279,24150601111031,24154896078328,24159191045625,24412594116148,24472723658306,24498493462088,24502788429385,24507083396682,24644522350186,24760486467205,24927990191788,25018184505025,25108378818262,25116968752856,25121263720153,25391846659864,25619479926605,25628069861199,25653839664981,25666724566872,25718264174436,25722559141733,25842818226049,25911537702801,25937307506583,25997437048741,26010321950632,26396869007362,26426933778441,26452703582223,26512833124381,26517128091678,26594437503024,26620207306806,26637387175994,26710401620043,26749056325716,26839250638953,26916560050299,26925149984893,27371826583781,27470610831612,27509265537285,27874337757530,27891517626718,27895812594015,27917287430500,28114855926162,28153510631835,28303834487230,28368258996685,28385438865873,28647431870990,28729036249633,29313151802025,29356101474995,29390461213371,29407641082559,29493540428499,29785598204695,29918742190902,30129195588455,30210799967098,30215094934395,30863634996242,30872224930836,30945239374885,31112743099468,31125628001359,31159987739735,31185757543517,31374736104585,31400505908367,32031866101026,32203664792906,33036888448524,33075543154197,33097017990682,33105607925276,33114197859870,33122787794464,33307471388235,33324651257423,33337536159314,33376190864987,33393370734175,33419140537957,33427730472551,33470680145521,33633888902807,33676838575777,33784212758202,33792802692796,33801392627390,33917356744409,34252364193575,34282428964654,34286723931951,34492882362207,34557306871662,34578781708147,34630321315711,34634616283008,34643206217602,34784940138403,35235911704588,35300336214043,35304631181340,35317516083231,35326106017825,35343285887013,35356170788904,35502199677002,35618163794021,35691178238070,35948876275890,35961761177781,35970351112375,36021890719939,36051955491018,36262408888571,36279588757759,36305358561541,36352603201808,36455682416936,36464272351530,36528696860985,36541581762876,36545876730173,36584531435846,36863704310151,37014028165546,37039797969328,37387690320385,37409165156870,37666863194690,37722697769551,37735582671442,37954626003589,38100654891687,38130719662766,38165079401142,38362647896804,38538741555981,38551626457872,38620345934624,38822209397583,38856569135959,38912403710820,38959648351087,38998303056760,39041252729730,39144331944858,39161511814046,39234526258095,39243116192689,39371965211599,39449274622945,39689792791577,39737037431844,39745627366438,39865886450754,39895951221833,39964670698585,40024800240743,40106404619386,40149354292356,40265318409375,40432822133958,40454296970443,40514426512601,40518721479898,40527311414492,40604620825838,40643275531511,40888088667440,41038412522835,41085657163102,41150081672557,41218801149309,41266045789576,41407779710377,41424959579565,41463614285238,41570988467663,41579578402257];

const service = new MetaService()

let start = Date.now()

let promises = []
for(let id of ids) {
  promises.push(service.getRawMeta(Utils.toShortId(id)))
}
Promise.all(promises).then(data => {
  console.log(`getRawMeta取${ids.length}条meta，用时${Date.now() - start}ms：`, ids.length)
})


service.getRawMetas(ids)
.then(metas => {
  console.log(`getRawMetas取${ids.length}条meta，用时${Date.now() - start}ms：`, metas.length)
})
.catch(e => {
  console.log(e)
})
